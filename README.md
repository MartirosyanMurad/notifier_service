## Для локальной настройки проекта
1. скопировать `.env.example` в `.env`
2. в корне проекта запустить команду `docker-compose up -d --build` (поднимает базу данных из файла db/notification.sql)
3. для запуска скриптов в ручном режиме в корне проекта выполнить команду `php script.php {script_name}`, где `{script_name}` принимает одну из следующих значений `check_users_email`, `send_notification_for_users`

## Настройка cron

#### Запускает команду проверки email каждый час
```0 * * * * /usr/bin/php /path/to/script.php check_users_email >> /path/to/check_users_email.log 2>&1```
#### Запускает оповещения пользователей каждую минуту
 ```* * * * * /usr/bin/php /path/to/script.php send_notification_for_users >> /path/to/send_notification_for_users.log 2>&1```



## PHP Developer. Test Cases

Вы разрабатываете сервис для рассылки уведомлений об истекающих подписках.
Примерно за три дня до истечения срока подписки, нужно отправить письмо пользователю с текстом "{username}, your subscription is expiring soon".


## Имеем следующее

1. Таблица users в DB с пользователями (1 000 000 строк):
   username — имя
   email — емейл
   validts — unix ts до которого действует ежемесячная подписка confirmed — 0 или 1 в зависимости от того, подтвердил ли пользователь свой емейл по ссылке (пользователю после регистрации приходит письмо с уникальный ссылкой на указанный емейл, если он нажал на ссылку в емейле в этом поле устанавливается 1)
2. Таблица emails в DB с данными проверки емейл на валидность:
   email — емейл
   checked — 0 или 1 (был ли проверен) valid — 0 или 1 (является ли валидным)
3. Функция check_email( $email )
   Проверяет емейл на валидность и возвращает 0 или 1. Функция работает от 1 секунды до 1 минуты. Вызов функции платный.
4. Функция send_email( $email, $from, $to, $subj, $body ) Отсылает емейл. Функция работает от 1 секунды до 10 секунд.

## Ограничения

➔ Необходимо регулярно отправлять емейлы об истечении срока подписки, но только на те емейлы, на которые письмо точно дойдёт.

➔ Можно использовать cron.

➔ Можно создать необходимые таблицы в DB или изменить существующие.

➔ Можно использовать вызов http://localhost/script.php для вызова своих скриптов.
   
➔ Для функций check_email и send_email нужно написать"заглушки".
   
➔ Не нужно использовать ООП.
   
➔ Можно задавать вопросы и уточнять условия задачи.
   
➔ Код разместить в GitHub.


